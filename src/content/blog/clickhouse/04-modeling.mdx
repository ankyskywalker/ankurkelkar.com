---
title: "Part 4: Data Modeling"
date: 2023-10-04
description: "Best practices for schema design, primary keys, and denormalization in ClickHouse."
tags: ["ClickHouse", "Data Modeling", "Schema Design"]
part: "Part 4 of 10"
cover: "../../../assets/images/clickhouse/part-4.png"
---

<p class="lead text-xl text-gray-300 mb-8">
    Modeling data in ClickHouse is different from traditional relational
    databases. Forget 3rd Normal Form; here, we embrace denormalization.
</p>

<h2>Denormalization is King</h2>
<p>
    Joins in distributed systems are expensive. In ClickHouse, it's
    often better to store wide tables with many columns rather than
    joining multiple tables at query time.
</p>

<h2>Choosing a Primary Key</h2>
<p>
    The primary key in ClickHouse (defined in <code>ORDER BY</code>)
    determines how data is sorted on disk. This is critical for query
    performance.
</p>
<div class="bg-slate-800/50 p-6 rounded-lg border-l-4 border-orange-500 my-8">
    <h4 class="text-orange-300 font-bold mb-2">Rule of Thumb</h4>
    <p>
        Choose columns that you frequently filter by in your <code>WHERE</code> clause. Put low-cardinality columns first in the key.
    </p>
</div>

<h2>Data Types Matter</h2>
<p>Using the correct data types saves storage and improves speed.</p>
<ul class="list-disc ml-4 space-y-2 text-gray-300">
    <li>
        Use <code>LowCardinality(String)</code> for strings with few unique
        values.
    </li>
    <li>
        Use <code>DateTime</code> or <code>DateTime64</code> for timestamps.
    </li>
    <li>Use <code>UInt*</code> types for non-negative numbers.</li>
</ul>

<h2>Conclusion</h2>
<p>
    A well-designed schema is the foundation of a fast ClickHouse
    cluster. In the next part, we'll learn how to get data INTO that
    schema.
</p>

<div class="flex justify-between mt-12 pt-8 border-t border-gray-700">
    <a href="/blog/clickhouse/03-mergetree" class="text-pink-400 hover:text-pink-300 font-bold">&larr; Part 3 - The MergeTree Family</a>
    <a href="/blog/clickhouse/05-ingestion" class="text-pink-400 hover:text-pink-300 font-bold">Next: Part 5 - Ingestion &rarr;</a>
</div>
